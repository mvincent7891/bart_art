{"version":3,"sources":["webpack/bootstrap 37d5819c782c30c16be0","./js/main.js","./js/utils/bart.js","./js/utils/map.js","./js/utils/parse_bart.js"],"names":["dataObject","canvasEl","document","getElementsByTagName","height","width","fetchStationData","$","ajax","url","method","success","fetchRoutes","fetchRouteData","number","SubwayMap","graph","stations","extractCoordLimits","bind","mapStations","mapCircle","drawLine","canvas","ctx","getContext","minX","minY","maxY","parseInt","maxX","x","y","a","b","x2","y2","c","d","graphArray","Object","keys","firstStation","Math","floor","random","length","stationsToDraw","undefined","stationsDrawn","i","station","lng","lat","mapCoords","push","forEach","indexOf","newStation","slice","x1","y1","setTimeout","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","fillStyle","arc","PI","fill","stationNames","minLat","maxLat","minLng","maxLng","name","lngRange","latRange","xCoord","yCoord","BART_API","DataInitializer","routes","routeConfig","dataFetcher","stationParser","routesParser","routeParser","constructGraph","message","find","each","idx","abbr","html","parseFloat","address","city","county","state","zipcode","route","routeID","color","newRoute","routeId","index","includes","map","console","log"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 37d5819c782c30c16be0\n **/","import { DataInitializer } from './utils/parse_bart';\n\nconst dataObject = new DataInitializer();\n\nconst canvasEl = document.getElementsByTagName(\"canvas\")[0];\ncanvasEl.height = 540;\ncanvasEl.width = 490;\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/main.js\n **/","export const fetchStationData = success => {\n  $.ajax({\n    url: 'http://api.bart.gov/api/stn.aspx?cmd=stns&key=MW9S-E7SL-26DU-VV8V',\n    method: 'GET',\n    success\n  });\n};\n\nexport const fetchRoutes = success => {\n  $.ajax({\n    url: 'http://api.bart.gov/api/route.aspx?cmd=routes&key=MW9S-E7SL-26DU-VV8V',\n    method: 'GET',\n    success\n  });\n};\n\nexport const fetchRouteData = (success, number) => {\n  $.ajax({\n    url: `http://api.bart.gov/api/route.aspx?cmd=routeinfo&route=${number}&key=MW9S-E7SL-26DU-VV8V`,\n    method: 'GET',\n    success\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/utils/bart.js\n **/","\nexport class SubwayMap {\n\n  constructor (graph, stations) {\n    this.graph = graph;\n    this.stations = stations;\n    this.extractCoordLimits = this.extractCoordLimits.bind(this);\n    this.mapStations = this.mapStations.bind(this);\n    this.mapCircle = this.mapCircle.bind(this);\n    this.drawLine = this.drawLine.bind(this);\n    this.canvas = document.getElementsByTagName(\"canvas\")[0];\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.minX = 0;\n    this.minY = 0;\n    this.maxY = parseInt(this.canvas.height) - 40;\n    this.maxX = parseInt(this.canvas.width) - 40;\n    this.extractCoordLimits();\n    this.mapStations();\n  }\n\n  mapStations() {\n    let x, y, a, b, x2, y2, c, d;\n    const graphArray = Object.keys(this.graph);\n    const graph = this.graph;\n    let firstStation = graphArray[Math.floor(Math.random() * graphArray.length)];\n    let stationsToDraw = [[firstStation, undefined]];\n    let stationsDrawn = [];\n    let i = -1;\n    let station;\n    while (stationsToDraw.length > 0) {\n      station = stationsToDraw[0][0];\n      i += 1;\n      x = this.stations[station].lng;\n      y = this.stations[station].lat;\n      [a, b] = this.mapCoords(x,y);\n      if (stationsToDraw[0][1]) {\n        x2 = this.stations[stationsToDraw[0][1]].lng;\n        y2 = this.stations[stationsToDraw[0][1]].lat;\n        [c, d] = this.mapCoords(x2,y2);\n        this.drawLine(a, b, c, d, i);\n      }\n      this.mapCircle(a, b, i);\n      stationsDrawn.push(stationsToDraw[0][0]);\n      graph[station].forEach(newStation => {\n        if (stationsDrawn.indexOf(newStation) === -1) {\n          stationsToDraw.push([newStation, station]);\n        }\n      });\n      stationsToDraw = stationsToDraw.slice(1);\n    }\n  }\n\n  drawLine (x1, y1, x2, y2, i) {\n    setTimeout(() => {\n      this.ctx.beginPath();\n      this.ctx.moveTo(x1 + 20, y1 + 20);\n      this.ctx.lineTo(x2 + 20, y2 + 20);\n      this.ctx.lineWidth = 1;\n      this.ctx.strokeStyle = '#272727';\n      this.ctx.stroke();\n    }, (25 * i));\n  }\n\n  mapCircle (x, y, i) {\n    setTimeout(() => {\n      this.ctx.fillStyle = \"#272727\";\n      this.ctx.beginPath();\n      this.ctx.arc(\n        x + 20,\n        y + 20,\n        2,\n        0,\n        2 * Math.PI,\n        false\n      );\n      this.ctx.fill();\n    }, ((25*i) + (2 * i)) );\n  }\n\n  extractCoordLimits () {\n    // Pull minimum and maximum lat/lng for normalizing map on canvas\n    const stations = this.stations;\n    const stationNames = Object.keys(this.stations);\n    const firstStation = stations[stationNames[0]];\n    this.minLat = firstStation.lat;\n    this.maxLat = firstStation.lat;\n    this.minLng = firstStation.lng;\n    this.maxLng = firstStation.lng;\n    let newStation;\n    stationNames.forEach(name => {\n      newStation = stations[name];\n      if (newStation.lat > this.maxLat) {\n        this.maxLat = newStation.lat;\n      } else if (newStation.lat < this.minLat) {\n        this.minLat = newStation.lat;\n      }\n      if (newStation.lng > this.maxLng) {\n        this.maxLng = newStation.lng;\n      } else if (newStation.lng < this.minLng) {\n        this.minLng = newStation.lng;\n      }\n    });\n  }\n\n  mapCoords(lng, lat) {\n    // Pass in (lat, lng); return (x, y) coords for canvas element\n    const lngRange = this.maxLng - this.minLng;\n    const latRange = this.maxLat - this.minLat;\n    const xCoord = Math.floor(this.maxX * (lng - this.minLng) / lngRange);\n    const yCoord = Math.floor(this.maxY * (lat - this.minLat) / latRange);\n\n    return([xCoord, this.maxY - yCoord]);\n\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/utils/map.js\n **/","import * as BART_API from './bart.js';\nimport { SubwayMap } from './map';\n\nexport class DataInitializer {\n  constructor () {\n    this.stations = {};\n    this.routes = {};\n    this.routeConfig = {};\n    this.dataFetcher = this.dataFetcher.bind(this);\n    this.stationParser = this.stationParser.bind(this);\n    this.routesParser = this.routesParser.bind(this);\n    this.routeParser = this.routeParser.bind(this);\n    this.constructGraph = this.constructGraph.bind(this);\n    this.graph = {};\n    this.dataFetcher();\n  }\n\n  dataFetcher () {\n    BART_API.fetchRoutes(this.routesParser);\n    BART_API.fetchStationData(this.stationParser);\n  }\n\n  stationParser (message) {\n    let stations = this.stations;\n    $(message).find('station').each((idx, station) => {\n      const abbr = $(station).find('abbr').html();\n      const name = $(station).find('name').html();\n      const lat = parseFloat($(station).find('gtfs_latitude').html());\n      const lng = parseFloat($(station).find('gtfs_longitude').html());\n      const address = $(station).find('address').html();\n      const city = $(station).find('city').html();\n      const county = $(station).find('county').html();\n      const state = $(station).find('state').html();\n      const zipcode = $(station).find('zipcode').html();\n      const newStation = { abbr, name, lat, lng, address,\n                           city, county, state, zipcode };\n      stations[abbr] = newStation;\n    });\n  }\n\n  routesParser (message) {\n    let routes = this.routes;\n    let routeParser = this.routeParser;\n    $(message).find('route').each((idx, route) => {\n      const abbr = $(route).find('abbr').html();\n      const name = $(route).find('name').html();\n      const routeID = $(route).find('routeID').html();\n      const number = $(route).find('number').html();\n      const color = $(route).find('color').html();\n      const newRoute = { abbr, name, routeID, number, color };\n      BART_API.fetchRouteData(routeParser, number);\n      routes[routeID] = newRoute;\n    });\n  }\n\n  routeParser (message) {\n    const number = $(message).find('number').html();\n    const stations = [];\n    $(message).find('station').each((idx, station) => {\n        stations.push($(station).html());\n    });\n    this.routeConfig[number] = stations;\n    if (Object.keys(this.routeConfig).length ===\n        Object.keys(this.routes).length) {\n      this.constructGraph();\n    }\n  }\n\n  constructGraph () {\n    let graph = this.graph;\n    Object.keys(this.stations).forEach(abbr => {\n      graph[abbr] = [];\n    });\n    const routeConfig = this.routeConfig;\n    Object.keys(routeConfig).forEach(routeId => {\n      const route = routeConfig[routeId];\n      route.slice(0,(route.length - 1)).forEach((station, index) => {\n        if (!graph[route[index]].includes(route[index + 1])) {\n          graph[route[index]].push(route[index + 1]);\n        }\n      });\n    });\n    const map = new SubwayMap(graph, this.stations);\n    console.log(graph);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/utils/parse_bart.js\n **/"],"sourceRoot":""}