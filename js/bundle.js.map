{"version":3,"sources":["webpack/bootstrap 5efbef135b08ce91c061","./js/main.js","./js/utils/bart.js","./js/utils/initialize_data.js","./js/utils/map.js"],"names":["dataObject","canvasEl","document","getElementsByTagName","height","width","fetchStationData","$","ajax","url","method","success","fetchRoutes","fetchRouteData","number","BART_API","DataInitializer","stations","routes","routeConfig","dataFetcher","bind","stationParser","routesParser","routeParser","constructGraph","graph","message","find","each","idx","station","abbr","html","name","lat","parseFloat","lng","address","city","county","state","zipcode","newStation","route","routeID","color","newRoute","push","Object","keys","length","forEach","routeId","slice","index","includes","map","console","log","SubwayMap","extractCoordLimits","mapStations","mapCircle","drawLine","canvas","ctx","getContext","minX","minY","maxY","parseInt","maxX","x","y","a","b","x2","y2","c","d","graphArray","firstStation","Math","floor","random","stationsToDraw","undefined","stationsDrawn","i","mapCoords","indexOf","x1","y1","setTimeout","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","fillStyle","arc","PI","fill","stationNames","minLat","maxLat","minLng","maxLng","lngRange","latRange","xCoord","yCoord"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACtCA;;AAEA,KAAMA,aAAa,sCAAnB;;AAEA,KAAMC,WAAWC,SAASC,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAjB;AACAF,UAASG,MAAT,GAAkB,GAAlB;AACAH,UAASI,KAAT,GAAiB,GAAjB,C;;;;;;;;;;;;ACNO,KAAMC,8CAAmB,SAAnBA,gBAAmB,UAAW;AACzCC,KAAEC,IAAF,CAAO;AACLC,UAAK,mEADA;AAELC,aAAQ,KAFH;AAGLC;AAHK,IAAP;AAKD,EANM;;AAQA,KAAMC,oCAAc,SAAdA,WAAc,UAAW;AACpCL,KAAEC,IAAF,CAAO;AACLC,UAAK,uEADA;AAELC,aAAQ,KAFH;AAGLC;AAHK,IAAP;AAKD,EANM;;AAQA,KAAME,0CAAiB,SAAjBA,cAAiB,CAACF,OAAD,EAAUG,MAAV,EAAqB;AACjDP,KAAEC,IAAF,CAAO;AACLC,sEAA+DK,MAA/D,6BADK;AAELJ,aAAQ,KAFH;AAGLC;AAHK,IAAP;AAKD,EANM,C;;;;;;;;;;;;;;;;AChBP;;KAAYI,Q;;AACZ;;;;;;KAEaC,e,WAAAA,e;AACX,8BAAe;AAAA;;AACb,UAAKC,QAAL,GAAgB,EAAhB;AACA,UAAKC,MAAL,GAAc,EAAd;AACA,UAAKC,WAAL,GAAmB,EAAnB;AACA,UAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,UAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACA,UAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAApB;AACA,UAAKG,WAAL,GAAmB,KAAKA,WAAL,CAAiBH,IAAjB,CAAsB,IAAtB,CAAnB;AACA,UAAKI,cAAL,GAAsB,KAAKA,cAAL,CAAoBJ,IAApB,CAAyB,IAAzB,CAAtB;AACA,UAAKK,KAAL,GAAa,EAAb;AACA,UAAKN,WAAL;AACD;;;;mCAEc;AACbL,gBAASH,WAAT,CAAqB,KAAKW,YAA1B;AACAR,gBAAST,gBAAT,CAA0B,KAAKgB,aAA/B;AACD;;;mCAEcK,O,EAAS;AACtB,WAAIV,WAAW,KAAKA,QAApB;AACAV,SAAEoB,OAAF,EAAWC,IAAX,CAAgB,SAAhB,EAA2BC,IAA3B,CAAgC,UAACC,GAAD,EAAMC,OAAN,EAAkB;AAChD,aAAMC,OAAOzB,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,MAAhB,EAAwBK,IAAxB,EAAb;AACA,aAAMC,OAAO3B,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,MAAhB,EAAwBK,IAAxB,EAAb;AACA,aAAME,MAAMC,WAAW7B,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,eAAhB,EAAiCK,IAAjC,EAAX,CAAZ;AACA,aAAMI,MAAMD,WAAW7B,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,gBAAhB,EAAkCK,IAAlC,EAAX,CAAZ;AACA,aAAMK,UAAU/B,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,SAAhB,EAA2BK,IAA3B,EAAhB;AACA,aAAMM,OAAOhC,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,MAAhB,EAAwBK,IAAxB,EAAb;AACA,aAAMO,SAASjC,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,QAAhB,EAA0BK,IAA1B,EAAf;AACA,aAAMQ,QAAQlC,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,OAAhB,EAAyBK,IAAzB,EAAd;AACA,aAAMS,UAAUnC,EAAEwB,OAAF,EAAWH,IAAX,CAAgB,SAAhB,EAA2BK,IAA3B,EAAhB;AACA,aAAMU,aAAa,EAAEX,UAAF,EAAQE,UAAR,EAAcC,QAAd,EAAmBE,QAAnB,EAAwBC,gBAAxB;AACEC,qBADF,EACQC,cADR,EACgBC,YADhB,EACuBC,gBADvB,EAAnB;AAEAzB,kBAASe,IAAT,IAAiBW,UAAjB;AACD,QAbD;AAcD;;;kCAEahB,O,EAAS;AACrB,WAAIT,SAAS,KAAKA,MAAlB;AACA,WAAIM,cAAc,KAAKA,WAAvB;AACAjB,SAAEoB,OAAF,EAAWC,IAAX,CAAgB,OAAhB,EAAyBC,IAAzB,CAA8B,UAACC,GAAD,EAAMc,KAAN,EAAgB;AAC5C,aAAMZ,OAAOzB,EAAEqC,KAAF,EAAShB,IAAT,CAAc,MAAd,EAAsBK,IAAtB,EAAb;AACA,aAAMC,OAAO3B,EAAEqC,KAAF,EAAShB,IAAT,CAAc,MAAd,EAAsBK,IAAtB,EAAb;AACA,aAAMY,UAAUtC,EAAEqC,KAAF,EAAShB,IAAT,CAAc,SAAd,EAAyBK,IAAzB,EAAhB;AACA,aAAMnB,SAASP,EAAEqC,KAAF,EAAShB,IAAT,CAAc,QAAd,EAAwBK,IAAxB,EAAf;AACA,aAAMa,QAAQvC,EAAEqC,KAAF,EAAShB,IAAT,CAAc,OAAd,EAAuBK,IAAvB,EAAd;AACA,aAAMc,WAAW,EAAEf,UAAF,EAAQE,UAAR,EAAcW,gBAAd,EAAuB/B,cAAvB,EAA+BgC,YAA/B,EAAjB;AACA/B,kBAASF,cAAT,CAAwBW,WAAxB,EAAqCV,MAArC;AACAI,gBAAO2B,OAAP,IAAkBE,QAAlB;AACD,QATD;AAUD;;;iCAEYpB,O,EAAS;AACpB,WAAMb,SAASP,EAAEoB,OAAF,EAAWC,IAAX,CAAgB,QAAhB,EAA0BK,IAA1B,EAAf;AACA,WAAMhB,WAAW,EAAjB;AACAV,SAAEoB,OAAF,EAAWC,IAAX,CAAgB,SAAhB,EAA2BC,IAA3B,CAAgC,UAACC,GAAD,EAAMC,OAAN,EAAkB;AAC9Cd,kBAAS+B,IAAT,CAAczC,EAAEwB,OAAF,EAAWE,IAAX,EAAd;AACH,QAFD;AAGA,YAAKd,WAAL,CAAiBL,MAAjB,IAA2BG,QAA3B;AACA,WAAIgC,OAAOC,IAAP,CAAY,KAAK/B,WAAjB,EAA8BgC,MAA9B,KACAF,OAAOC,IAAP,CAAY,KAAKhC,MAAjB,EAAyBiC,MAD7B,EACqC;AACnC,cAAK1B,cAAL;AACD;AACF;;;sCAEiB;AAChB,WAAIC,QAAQ,KAAKA,KAAjB;AACAuB,cAAOC,IAAP,CAAY,KAAKjC,QAAjB,EAA2BmC,OAA3B,CAAmC,gBAAQ;AACzC1B,eAAMM,IAAN,IAAc,EAAd;AACD,QAFD;AAGA,WAAMb,cAAc,KAAKA,WAAzB;AACA8B,cAAOC,IAAP,CAAY/B,WAAZ,EAAyBiC,OAAzB,CAAiC,mBAAW;AAC1C,aAAMR,QAAQzB,YAAYkC,OAAZ,CAAd;AACAT,eAAMU,KAAN,CAAY,CAAZ,EAAeV,MAAMO,MAAN,GAAe,CAA9B,EAAkCC,OAAlC,CAA0C,UAACrB,OAAD,EAAUwB,KAAV,EAAoB;AAC5D,eAAI,CAAC7B,MAAMkB,MAAMW,KAAN,CAAN,EAAoBC,QAApB,CAA6BZ,MAAMW,QAAQ,CAAd,CAA7B,CAAL,EAAqD;AACnD7B,mBAAMkB,MAAMW,KAAN,CAAN,EAAoBP,IAApB,CAAyBJ,MAAMW,QAAQ,CAAd,CAAzB;AACD;AACF,UAJD;AAKD,QAPD;AAQA,WAAME,MAAM,mBAAc/B,KAAd,EAAqB,KAAKT,QAA1B,CAAZ;AACAyC,eAAQC,GAAR,CAAYjC,KAAZ;AACD;;;;;;;;;;;;;;;;;;;;;;;KCnFUkC,S,WAAAA,S;AAEX,sBAAalC,KAAb,EAAoBT,QAApB,EAA8B;AAAA;;AAC5B,UAAKS,KAAL,GAAaA,KAAb;AACA,UAAKT,QAAL,GAAgBA,QAAhB;AACA,UAAK4C,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBxC,IAAxB,CAA6B,IAA7B,CAA1B;AACA,UAAKyC,WAAL,GAAmB,KAAKA,WAAL,CAAiBzC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,UAAK0C,SAAL,GAAiB,KAAKA,SAAL,CAAe1C,IAAf,CAAoB,IAApB,CAAjB;AACA,UAAK2C,QAAL,GAAgB,KAAKA,QAAL,CAAc3C,IAAd,CAAmB,IAAnB,CAAhB;AACA,UAAK4C,MAAL,GAAc/D,SAASC,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAd;AACA,UAAK+D,GAAL,GAAW,KAAKD,MAAL,CAAYE,UAAZ,CAAuB,IAAvB,CAAX;AACA,UAAKC,IAAL,GAAY,CAAZ;AACA,UAAKC,IAAL,GAAY,CAAZ;AACA,UAAKC,IAAL,GAAYC,SAAS,KAAKN,MAAL,CAAY7D,MAArB,IAA+B,EAA3C;AACA,UAAKoE,IAAL,GAAYD,SAAS,KAAKN,MAAL,CAAY5D,KAArB,IAA8B,EAA1C;AACA,UAAKwD,kBAAL;AACA,UAAKC,WAAL;AACD;;;;mCAEa;AACZ,WAAIW,UAAJ;AAAA,WAAOC,UAAP;AAAA,WAAUC,UAAV;AAAA,WAAaC,UAAb;AAAA,WAAgBC,WAAhB;AAAA,WAAoBC,WAApB;AAAA,WAAwBC,UAAxB;AAAA,WAA2BC,UAA3B;AACA,WAAMC,aAAahC,OAAOC,IAAP,CAAY,KAAKxB,KAAjB,CAAnB;AACA,WAAMA,QAAQ,KAAKA,KAAnB;AACA,WAAIwD,eAAeD,WAAWE,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBJ,WAAW9B,MAAtC,CAAX,CAAnB;AACA,WAAImC,iBAAiB,CAAC,CAACJ,YAAD,EAAeK,SAAf,CAAD,CAArB;AACA,WAAIC,gBAAgB,EAApB;AACA,WAAIC,IAAI,CAAC,CAAT;AACA,WAAI1D,gBAAJ;AACA,cAAOuD,eAAenC,MAAf,GAAwB,CAA/B,EAAkC;AAChCpB,mBAAUuD,eAAe,CAAf,EAAkB,CAAlB,CAAV;AACAG,cAAK,CAAL;AACAhB,aAAI,KAAKxD,QAAL,CAAcc,OAAd,EAAuBM,GAA3B;AACAqC,aAAI,KAAKzD,QAAL,CAAcc,OAAd,EAAuBI,GAA3B;;AAJgC,0BAKvB,KAAKuD,SAAL,CAAejB,CAAf,EAAiBC,CAAjB,CALuB;;AAAA;;AAK/BC,UAL+B;AAK5BC,UAL4B;;AAMhC,aAAIU,eAAe,CAAf,EAAkB,CAAlB,CAAJ,EAA0B;AACxBT,gBAAK,KAAK5D,QAAL,CAAcqE,eAAe,CAAf,EAAkB,CAAlB,CAAd,EAAoCjD,GAAzC;AACAyC,gBAAK,KAAK7D,QAAL,CAAcqE,eAAe,CAAf,EAAkB,CAAlB,CAAd,EAAoCnD,GAAzC;;AAFwB,6BAGf,KAAKuD,SAAL,CAAeb,EAAf,EAAkBC,EAAlB,CAHe;;AAAA;;AAGvBC,YAHuB;AAGpBC,YAHoB;;AAIxB,gBAAKhB,QAAL,CAAcW,CAAd,EAAiBC,CAAjB,EAAoBG,CAApB,EAAuBC,CAAvB,EAA0BS,CAA1B;AACD;AACD,cAAK1B,SAAL,CAAeY,CAAf,EAAkBC,CAAlB,EAAqBa,CAArB;AACAD,uBAAcxC,IAAd,CAAmBsC,eAAe,CAAf,EAAkB,CAAlB,CAAnB;AACA5D,eAAMK,OAAN,EAAeqB,OAAf,CAAuB,sBAAc;AACnC,eAAIoC,cAAcG,OAAd,CAAsBhD,UAAtB,MAAsC,CAAC,CAA3C,EAA8C;AAC5C2C,4BAAetC,IAAf,CAAoB,CAACL,UAAD,EAAaZ,OAAb,CAApB;AACD;AACF,UAJD;AAKAuD,0BAAiBA,eAAehC,KAAf,CAAqB,CAArB,CAAjB;AACD;AACF;;;8BAESsC,E,EAAIC,E,EAAIhB,E,EAAIC,E,EAAIW,C,EAAG;AAAA;;AAC3BK,kBAAW,YAAM;AACf,eAAK5B,GAAL,CAAS6B,SAAT;AACA,eAAK7B,GAAL,CAAS8B,MAAT,CAAgBJ,KAAK,EAArB,EAAyBC,KAAK,EAA9B;AACA,eAAK3B,GAAL,CAAS+B,MAAT,CAAgBpB,KAAK,EAArB,EAAyBC,KAAK,EAA9B;AACA,eAAKZ,GAAL,CAASgC,SAAT,GAAqB,CAArB;AACA,eAAKhC,GAAL,CAASiC,WAAT,GAAuB,SAAvB;AACA,eAAKjC,GAAL,CAASkC,MAAT;AACD,QAPD,EAOI,KAAKX,CAPT;AAQD;;;+BAEUhB,C,EAAGC,C,EAAGe,C,EAAG;AAAA;;AAClBK,kBAAW,YAAM;AACf,gBAAK5B,GAAL,CAASmC,SAAT,GAAqB,SAArB;AACA,gBAAKnC,GAAL,CAAS6B,SAAT;AACA,gBAAK7B,GAAL,CAASoC,GAAT,CACE7B,IAAI,EADN,EAEEC,IAAI,EAFN,EAGE,CAHF,EAIE,CAJF,EAKE,IAAIS,KAAKoB,EALX,EAME,KANF;AAQA,gBAAKrC,GAAL,CAASsC,IAAT;AACD,QAZD,EAYK,KAAGf,CAAJ,GAAU,IAAIA,CAZlB;AAaD;;;0CAEqB;AAAA;;AACpB;AACA,WAAMxE,WAAW,KAAKA,QAAtB;AACA,WAAMwF,eAAexD,OAAOC,IAAP,CAAY,KAAKjC,QAAjB,CAArB;AACA,WAAMiE,eAAejE,SAASwF,aAAa,CAAb,CAAT,CAArB;AACA,YAAKC,MAAL,GAAcxB,aAAa/C,GAA3B;AACA,YAAKwE,MAAL,GAAczB,aAAa/C,GAA3B;AACA,YAAKyE,MAAL,GAAc1B,aAAa7C,GAA3B;AACA,YAAKwE,MAAL,GAAc3B,aAAa7C,GAA3B;AACA,WAAIM,mBAAJ;AACA8D,oBAAarD,OAAb,CAAqB,gBAAQ;AAC3BT,sBAAa1B,SAASiB,IAAT,CAAb;AACA,aAAIS,WAAWR,GAAX,GAAiB,OAAKwE,MAA1B,EAAkC;AAChC,kBAAKA,MAAL,GAAchE,WAAWR,GAAzB;AACD,UAFD,MAEO,IAAIQ,WAAWR,GAAX,GAAiB,OAAKuE,MAA1B,EAAkC;AACvC,kBAAKA,MAAL,GAAc/D,WAAWR,GAAzB;AACD;AACD,aAAIQ,WAAWN,GAAX,GAAiB,OAAKwE,MAA1B,EAAkC;AAChC,kBAAKA,MAAL,GAAclE,WAAWN,GAAzB;AACD,UAFD,MAEO,IAAIM,WAAWN,GAAX,GAAiB,OAAKuE,MAA1B,EAAkC;AACvC,kBAAKA,MAAL,GAAcjE,WAAWN,GAAzB;AACD;AACF,QAZD;AAaD;;;+BAESA,G,EAAKF,G,EAAK;AAClB;AACA,WAAM2E,WAAW,KAAKD,MAAL,GAAc,KAAKD,MAApC;AACA,WAAMG,WAAW,KAAKJ,MAAL,GAAc,KAAKD,MAApC;AACA,WAAMM,SAAS7B,KAAKC,KAAL,CAAW,KAAKZ,IAAL,IAAanC,MAAM,KAAKuE,MAAxB,IAAkCE,QAA7C,CAAf;AACA,WAAMG,SAAS9B,KAAKC,KAAL,CAAW,KAAKd,IAAL,IAAanC,MAAM,KAAKuE,MAAxB,IAAkCK,QAA7C,CAAf;;AAEA,cAAO,CAACC,MAAD,EAAS,KAAK1C,IAAL,GAAY2C,MAArB,CAAP;AAED","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5efbef135b08ce91c061\n **/","import { DataInitializer } from './utils/initialize_data';\n\nconst dataObject = new DataInitializer();\n\nconst canvasEl = document.getElementsByTagName(\"canvas\")[0];\ncanvasEl.height = 540;\ncanvasEl.width = 490;\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/main.js\n **/","export const fetchStationData = success => {\n  $.ajax({\n    url: 'http://api.bart.gov/api/stn.aspx?cmd=stns&key=MW9S-E7SL-26DU-VV8V',\n    method: 'GET',\n    success\n  });\n};\n\nexport const fetchRoutes = success => {\n  $.ajax({\n    url: 'http://api.bart.gov/api/route.aspx?cmd=routes&key=MW9S-E7SL-26DU-VV8V',\n    method: 'GET',\n    success\n  });\n};\n\nexport const fetchRouteData = (success, number) => {\n  $.ajax({\n    url: `http://api.bart.gov/api/route.aspx?cmd=routeinfo&route=${number}&key=MW9S-E7SL-26DU-VV8V`,\n    method: 'GET',\n    success\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/utils/bart.js\n **/","import * as BART_API from './bart.js';\nimport { SubwayMap } from './map';\n\nexport class DataInitializer {\n  constructor () {\n    this.stations = {};\n    this.routes = {};\n    this.routeConfig = {};\n    this.dataFetcher = this.dataFetcher.bind(this);\n    this.stationParser = this.stationParser.bind(this);\n    this.routesParser = this.routesParser.bind(this);\n    this.routeParser = this.routeParser.bind(this);\n    this.constructGraph = this.constructGraph.bind(this);\n    this.graph = {};\n    this.dataFetcher();\n  }\n\n  dataFetcher () {\n    BART_API.fetchRoutes(this.routesParser);\n    BART_API.fetchStationData(this.stationParser);\n  }\n\n  stationParser (message) {\n    let stations = this.stations;\n    $(message).find('station').each((idx, station) => {\n      const abbr = $(station).find('abbr').html();\n      const name = $(station).find('name').html();\n      const lat = parseFloat($(station).find('gtfs_latitude').html());\n      const lng = parseFloat($(station).find('gtfs_longitude').html());\n      const address = $(station).find('address').html();\n      const city = $(station).find('city').html();\n      const county = $(station).find('county').html();\n      const state = $(station).find('state').html();\n      const zipcode = $(station).find('zipcode').html();\n      const newStation = { abbr, name, lat, lng, address,\n                           city, county, state, zipcode };\n      stations[abbr] = newStation;\n    });\n  }\n\n  routesParser (message) {\n    let routes = this.routes;\n    let routeParser = this.routeParser;\n    $(message).find('route').each((idx, route) => {\n      const abbr = $(route).find('abbr').html();\n      const name = $(route).find('name').html();\n      const routeID = $(route).find('routeID').html();\n      const number = $(route).find('number').html();\n      const color = $(route).find('color').html();\n      const newRoute = { abbr, name, routeID, number, color };\n      BART_API.fetchRouteData(routeParser, number);\n      routes[routeID] = newRoute;\n    });\n  }\n\n  routeParser (message) {\n    const number = $(message).find('number').html();\n    const stations = [];\n    $(message).find('station').each((idx, station) => {\n        stations.push($(station).html());\n    });\n    this.routeConfig[number] = stations;\n    if (Object.keys(this.routeConfig).length ===\n        Object.keys(this.routes).length) {\n      this.constructGraph();\n    }\n  }\n\n  constructGraph () {\n    let graph = this.graph;\n    Object.keys(this.stations).forEach(abbr => {\n      graph[abbr] = [];\n    });\n    const routeConfig = this.routeConfig;\n    Object.keys(routeConfig).forEach(routeId => {\n      const route = routeConfig[routeId];\n      route.slice(0,(route.length - 1)).forEach((station, index) => {\n        if (!graph[route[index]].includes(route[index + 1])) {\n          graph[route[index]].push(route[index + 1]);\n        }\n      });\n    });\n    const map = new SubwayMap(graph, this.stations);\n    console.log(graph);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/utils/initialize_data.js\n **/","\nexport class SubwayMap {\n\n  constructor (graph, stations) {\n    this.graph = graph;\n    this.stations = stations;\n    this.extractCoordLimits = this.extractCoordLimits.bind(this);\n    this.mapStations = this.mapStations.bind(this);\n    this.mapCircle = this.mapCircle.bind(this);\n    this.drawLine = this.drawLine.bind(this);\n    this.canvas = document.getElementsByTagName(\"canvas\")[0];\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.minX = 0;\n    this.minY = 0;\n    this.maxY = parseInt(this.canvas.height) - 40;\n    this.maxX = parseInt(this.canvas.width) - 40;\n    this.extractCoordLimits();\n    this.mapStations();\n  }\n\n  mapStations() {\n    let x, y, a, b, x2, y2, c, d;\n    const graphArray = Object.keys(this.graph);\n    const graph = this.graph;\n    let firstStation = graphArray[Math.floor(Math.random() * graphArray.length)];\n    let stationsToDraw = [[firstStation, undefined]];\n    let stationsDrawn = [];\n    let i = -1;\n    let station;\n    while (stationsToDraw.length > 0) {\n      station = stationsToDraw[0][0];\n      i += 1;\n      x = this.stations[station].lng;\n      y = this.stations[station].lat;\n      [a, b] = this.mapCoords(x,y);\n      if (stationsToDraw[0][1]) {\n        x2 = this.stations[stationsToDraw[0][1]].lng;\n        y2 = this.stations[stationsToDraw[0][1]].lat;\n        [c, d] = this.mapCoords(x2,y2);\n        this.drawLine(a, b, c, d, i);\n      }\n      this.mapCircle(a, b, i);\n      stationsDrawn.push(stationsToDraw[0][0]);\n      graph[station].forEach(newStation => {\n        if (stationsDrawn.indexOf(newStation) === -1) {\n          stationsToDraw.push([newStation, station]);\n        }\n      });\n      stationsToDraw = stationsToDraw.slice(1);\n    }\n  }\n\n  drawLine (x1, y1, x2, y2, i) {\n    setTimeout(() => {\n      this.ctx.beginPath();\n      this.ctx.moveTo(x1 + 20, y1 + 20);\n      this.ctx.lineTo(x2 + 20, y2 + 20);\n      this.ctx.lineWidth = 1;\n      this.ctx.strokeStyle = '#dddddd';\n      this.ctx.stroke();\n    }, (25 * i));\n  }\n\n  mapCircle (x, y, i) {\n    setTimeout(() => {\n      this.ctx.fillStyle = \"#676767\";\n      this.ctx.beginPath();\n      this.ctx.arc(\n        x + 20,\n        y + 20,\n        2,\n        0,\n        2 * Math.PI,\n        false\n      );\n      this.ctx.fill();\n    }, ((25*i) + (2 * i)) );\n  }\n\n  extractCoordLimits () {\n    // Pull minimum and maximum lat/lng for normalizing map on canvas\n    const stations = this.stations;\n    const stationNames = Object.keys(this.stations);\n    const firstStation = stations[stationNames[0]];\n    this.minLat = firstStation.lat;\n    this.maxLat = firstStation.lat;\n    this.minLng = firstStation.lng;\n    this.maxLng = firstStation.lng;\n    let newStation;\n    stationNames.forEach(name => {\n      newStation = stations[name];\n      if (newStation.lat > this.maxLat) {\n        this.maxLat = newStation.lat;\n      } else if (newStation.lat < this.minLat) {\n        this.minLat = newStation.lat;\n      }\n      if (newStation.lng > this.maxLng) {\n        this.maxLng = newStation.lng;\n      } else if (newStation.lng < this.minLng) {\n        this.minLng = newStation.lng;\n      }\n    });\n  }\n\n  mapCoords(lng, lat) {\n    // Pass in (lat, lng); return (x, y) coords for canvas element\n    const lngRange = this.maxLng - this.minLng;\n    const latRange = this.maxLat - this.minLat;\n    const xCoord = Math.floor(this.maxX * (lng - this.minLng) / lngRange);\n    const yCoord = Math.floor(this.maxY * (lat - this.minLat) / latRange);\n\n    return([xCoord, this.maxY - yCoord]);\n\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/utils/map.js\n **/"],"sourceRoot":""}